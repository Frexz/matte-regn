import{s as safe_not_equal,n as noop,r as run_all,o as onMount,b as binding_callbacks}from"../chunks/scheduler.e108d1fd.js";import{S as SvelteComponent,i as init,g as element,m as text,s as space,h as claim_element,j as children,n as claim_text,f as detach,c as claim_space,y as get_svelte_dataset,k as attr,l as set_style,a as insert_hydration,x as append_hydration,z as set_input_value,A as listen,o as set_data,B as to_number,C as destroy_each}from"../chunks/index.e9311cfd.js";function ensure_array_like(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}const _page_svelte_svelte_type_style_lang="";function get_each_context(e,t,n){const o=e.slice();return o[30]=t[n],o[32]=n,o}function get_each_context_1(e,t,n){const o=e.slice();return o[33]=t[n],o}function create_if_block_1(e){let t,n="Trykk ENTER for å starte",o,i,r="Skriv inn svar på regnestykkene og trykk ENTER. Er svaret riktig forsvinner regnestykket. Få så mange poeng som mulig før regnestykkene kommer til bunnen.";return{c(){t=element("h1"),t.textContent=n,o=space(),i=element("p"),i.textContent=r,this.h()},l(h){t=claim_element(h,"H1",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(t)!=="svelte-1hwwec"&&(t.textContent=n),o=claim_space(h),i=claim_element(h,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(i)!=="svelte-ine46i"&&(i.textContent=r),this.h()},h(){attr(t,"class","start-headline svelte-dowag4"),attr(i,"class","start-instructions svelte-dowag4")},m(h,c){insert_hydration(h,t,c),insert_hydration(h,o,c),insert_hydration(h,i,c)},d(h){h&&(detach(t),detach(o),detach(i))}}}function create_if_block(e){let t,n,o="Spillet er slutt",i,r,h,c,b,I,p,g,$;return{c(){t=element("div"),n=element("h1"),n.textContent=o,i=space(),r=element("p"),h=text("Du fikk "),c=text(e[0]),b=text(" poeng"),I=space(),p=element("input"),this.h()},l(l){t=claim_element(l,"DIV",{class:!0});var d=children(t);n=claim_element(d,"H1",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(n)!=="svelte-de7d2n"&&(n.textContent=o),i=claim_space(d),r=claim_element(d,"P",{class:!0});var _=children(r);h=claim_text(_,"Du fikk "),c=claim_text(_,e[0]),b=claim_text(_," poeng"),_.forEach(detach),I=claim_space(d),p=claim_element(d,"INPUT",{type:!0,placeholder:!0,style:!0}),d.forEach(detach),this.h()},h(){attr(n,"class","game-over-headline svelte-dowag4"),attr(r,"class","game-over-text svelte-dowag4"),attr(p,"type","text"),attr(p,"placeholder","Skriv inn navet ditt her og trykk ENTER"),set_style(p,"margin-top","50px"),set_style(p,"width","97%"),attr(t,"class","game-over svelte-dowag4")},m(l,d){insert_hydration(l,t,d),append_hydration(t,n),append_hydration(t,i),append_hydration(t,r),append_hydration(r,h),append_hydration(r,c),append_hydration(r,b),append_hydration(t,I),append_hydration(t,p),e[10](p),set_input_value(p,e[5]),g||($=[listen(p,"keypress",e[11]),listen(p,"input",e[12])],g=!0)},p(l,d){d[0]&1&&set_data(c,l[0]),d[0]&32&&p.value!==l[5]&&set_input_value(p,l[5])},d(l){l&&detach(t),e[10](null),g=!1,run_all($)}}}function create_each_block_1(e){let t,n=e[33].problem+"",o;return{c(){t=element("p"),o=text(n),this.h()},l(i){t=claim_element(i,"P",{style:!0,class:!0});var r=children(t);o=claim_text(r,n),r.forEach(detach),this.h()},h(){set_style(t,"color",e[33].color),set_style(t,"left",e[33].x+"px"),set_style(t,"top",e[33].y+"px"),attr(t,"class","svelte-dowag4")},m(i,r){insert_hydration(i,t,r),append_hydration(t,o)},p(i,r){r[0]&64&&n!==(n=i[33].problem+"")&&set_data(o,n),r[0]&64&&set_style(t,"color",i[33].color),r[0]&64&&set_style(t,"left",i[33].x+"px"),r[0]&64&&set_style(t,"top",i[33].y+"px")},d(i){i&&detach(t)}}}function create_each_block(e){let t,n=e[32]+1+"",o,i,r,h,c=(e[30][0]||"")+"",b,I,p,g=(e[30][1]||"")+"",$;return{c(){t=element("p"),o=text(n),i=text("."),r=space(),h=element("p"),b=text(c),I=space(),p=element("p"),$=text(g),this.h()},l(l){t=claim_element(l,"P",{class:!0});var d=children(t);o=claim_text(d,n),i=claim_text(d,"."),d.forEach(detach),r=claim_space(l),h=claim_element(l,"P",{class:!0});var _=children(h);b=claim_text(_,c),_.forEach(detach),I=claim_space(l),p=claim_element(l,"P",{style:!0,class:!0});var w=children(p);$=claim_text(w,g),w.forEach(detach),this.h()},h(){attr(t,"class","svelte-dowag4"),attr(h,"class","svelte-dowag4"),set_style(p,"text-align","right"),attr(p,"class","svelte-dowag4")},m(l,d){insert_hydration(l,t,d),append_hydration(t,o),append_hydration(t,i),insert_hydration(l,r,d),insert_hydration(l,h,d),append_hydration(h,b),insert_hydration(l,I,d),insert_hydration(l,p,d),append_hydration(p,$)},p(l,d){d[0]&128&&c!==(c=(l[30][0]||"")+"")&&set_data(b,c),d[0]&128&&g!==(g=(l[30][1]||"")+"")&&set_data($,g)},d(l){l&&(detach(t),detach(r),detach(h),detach(I),detach(p))}}}function create_fragment(e){let t,n,o,i,r,h,c,b,I,p,g,$,l,d,_,w,R="<h1>~*~ Topp 10 ~*~</h1>",A,k,T,F="<b>#</b>",D,S,U="<b>Navn</b>",O,M,B="<b>Poeng</b>",V,G,K,v=!e[1]&&create_if_block_1(),f=e[2]&&create_if_block(e),H=ensure_array_like(e[6]),m=[];for(let s=0;s<H.length;s+=1)m[s]=create_each_block_1(get_each_context_1(e,H,s));let C=ensure_array_like(e[7].sort(func).slice(0,10)),u=[];for(let s=0;s<C.length;s+=1)u[s]=create_each_block(get_each_context(e,C,s));return{c(){t=element("div"),n=element("div"),o=element("h1"),i=text("Poeng: "),r=text(e[0]),h=space(),c=element("div"),v&&v.c(),b=space(),f&&f.c(),I=space();for(let s=0;s<m.length;s+=1)m[s].c();p=space(),g=element("hr"),$=space(),l=element("input"),d=space(),_=element("div"),w=element("div"),w.innerHTML=R,A=space(),k=element("div"),T=element("p"),T.innerHTML=F,D=space(),S=element("p"),S.innerHTML=U,O=space(),M=element("p"),M.innerHTML=B,V=space();for(let s=0;s<u.length;s+=1)u[s].c();this.h()},l(s){t=claim_element(s,"DIV",{class:!0});var y=children(t);n=claim_element(y,"DIV",{class:!0,style:!0});var a=children(n);o=claim_element(a,"H1",{});var E=children(o);i=claim_text(E,"Poeng: "),r=claim_text(E,e[0]),E.forEach(detach),h=claim_space(a),c=claim_element(a,"DIV",{class:!0});var x=children(c);v&&v.l(x),b=claim_space(x),f&&f.l(x),I=claim_space(x);for(let L=0;L<m.length;L+=1)m[L].l(x);p=claim_space(x),g=claim_element(x,"HR",{class:!0}),x.forEach(detach),$=claim_space(a),l=claim_element(a,"INPUT",{class:!0,type:!0}),a.forEach(detach),d=claim_space(y),_=claim_element(y,"DIV",{class:!0,style:!0});var P=children(_);w=claim_element(P,"DIV",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(w)!=="svelte-1c9xji3"&&(w.innerHTML=R),A=claim_space(P),k=claim_element(P,"DIV",{class:!0});var N=children(k);T=claim_element(N,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(T)!=="svelte-eduls"&&(T.innerHTML=F),D=claim_space(N),S=claim_element(N,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(S)!=="svelte-1glm0ic"&&(S.innerHTML=U),O=claim_space(N),M=claim_element(N,"P",{style:!0,class:!0,"data-svelte-h":!0}),get_svelte_dataset(M)!=="svelte-cy9vxw"&&(M.innerHTML=B),V=claim_space(N);for(let L=0;L<u.length;L+=1)u[L].l(N);N.forEach(detach),P.forEach(detach),y.forEach(detach),this.h()},h(){attr(g,"class","svelte-dowag4"),attr(c,"class","game-window svelte-dowag4"),attr(l,"class","game-input svelte-dowag4"),attr(l,"type","number"),attr(n,"class","game svelte-dowag4"),set_style(n,"--width",WIDTH+"px"),set_style(n,"--height",HEIGHT+"px"),attr(w,"class","highscore-head svelte-dowag4"),attr(T,"class","svelte-dowag4"),attr(S,"class","svelte-dowag4"),set_style(M,"text-align","right"),attr(M,"class","svelte-dowag4"),attr(k,"class","entries svelte-dowag4"),attr(_,"class","highscore-list svelte-dowag4"),set_style(_,"--height",HEIGHT+"px"),attr(t,"class","content svelte-dowag4")},m(s,y){insert_hydration(s,t,y),append_hydration(t,n),append_hydration(n,o),append_hydration(o,i),append_hydration(o,r),append_hydration(n,h),append_hydration(n,c),v&&v.m(c,null),append_hydration(c,b),f&&f.m(c,null),append_hydration(c,I);for(let a=0;a<m.length;a+=1)m[a]&&m[a].m(c,null);append_hydration(c,p),append_hydration(c,g),append_hydration(n,$),append_hydration(n,l),set_input_value(l,e[4]),e[15](l),append_hydration(t,d),append_hydration(t,_),append_hydration(_,w),append_hydration(_,A),append_hydration(_,k),append_hydration(k,T),append_hydration(k,D),append_hydration(k,S),append_hydration(k,O),append_hydration(k,M),append_hydration(k,V);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(k,null);G||(K=[listen(l,"keypress",e[13]),listen(l,"input",e[14])],G=!0)},p(s,y){if(y[0]&1&&set_data(r,s[0]),s[1]?v&&(v.d(1),v=null):v||(v=create_if_block_1(),v.c(),v.m(c,b)),s[2]?f?f.p(s,y):(f=create_if_block(s),f.c(),f.m(c,I)):f&&(f.d(1),f=null),y[0]&64){H=ensure_array_like(s[6]);let a;for(a=0;a<H.length;a+=1){const E=get_each_context_1(s,H,a);m[a]?m[a].p(E,y):(m[a]=create_each_block_1(E),m[a].c(),m[a].m(c,p))}for(;a<m.length;a+=1)m[a].d(1);m.length=H.length}if(y[0]&16&&to_number(l.value)!==s[4]&&set_input_value(l,s[4]),y[0]&128){C=ensure_array_like(s[7].sort(func).slice(0,10));let a;for(a=0;a<C.length;a+=1){const E=get_each_context(s,C,a);u[a]?u[a].p(E,y):(u[a]=create_each_block(E),u[a].c(),u[a].m(k,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=C.length}},i:noop,o:noop,d(s){s&&detach(t),v&&v.d(),f&&f.d(),destroy_each(m,s),e[15](null),destroy_each(u,s),G=!1,run_all(K)}}}const WIDTH=1200,HEIGHT=700,ADDITION_LANE=100,SUBTRACTION_LANE=400,MULTIPLICATION_LANE=700,DIVISION_LANE=1e3;let animationSpeed=10;const func=(e,t)=>t[1]-e[1];function instance($$self,$$props,$$invalidate){let timer=0,moveLength=.5,rate=300,interval,answer,poeng=0,name,gameStarted=!1,gameOver=!1,speedIncrease=!1,rateIncrease=!1,problemInfo={0:{operator:"+",color:"#FF6969",x:ADDITION_LANE},1:{operator:"-",color:"#53BF9D",x:SUBTRACTION_LANE},2:{operator:"*",color:"#F7D060",x:MULTIPLICATION_LANE},3:{operator:"/",color:"#5272F2",x:DIVISION_LANE}},problems=[],highscores=[],gameInput,highscoreInput;onMount(()=>{if(gameInput.focus(),typeof window<"u"){const e=localStorage.getItem("highscores");e&&$$invalidate(7,highscores=JSON.parse(e))}});function startGame(){interval=setInterval(()=>{checkGameOver(),checkSpeedIncreaseAndRate(),generateProblem(),moveProblems(),timer++},animationSpeed)}function moveProblems(){for(const e of problems)e.y+=moveLength;$$invalidate(6,problems)}function checkGameOver(){for(const e of problems)e.y>HEIGHT-50+3&&(clearInterval(interval),$$invalidate(2,gameOver=!0))}function saveHighscores(){typeof window<"u"&&localStorage.setItem("highscores",JSON.stringify(highscores))}function handleKeypress(e){e.keyCode==13&&!gameStarted?$$invalidate(1,gameStarted=!0):e.keyCode==13&&gameOver?($$invalidate(7,highscores=[[name,poeng],...highscores].sort((t,n)=>n[1]-t[1]).slice(0,10)),saveHighscores(),$$invalidate(5,name=""),$$invalidate(2,gameOver=!1),$$invalidate(1,gameStarted=!1),$$invalidate(0,poeng=0),$$invalidate(6,problems=[]),moveLength=.5,rate=300,gameInput.focus()):e.keyCode==13&&(checkAnswer(answer),$$invalidate(4,answer=""))}function checkAnswer(e){problems.forEach(t=>{t.answer==e&&$$invalidate(0,poeng++,poeng)}),$$invalidate(6,problems=problems.filter(t=>t.answer!=e))}function checkSpeedIncreaseAndRate(){speedIncrease&&(moveLength+=.1,speedIncrease=!1),rateIncrease&&(rate-=30,rateIncrease=!1)}function generateProblem(){if(timer%rate==0){let typeNumber=Math.floor(4*Math.random()),num1=Math.floor(11*Math.random()),num2=Math.floor(11*Math.random());for(;typeNumber==1&&num1<num2;)num1=Math.floor(11*Math.random()),num2=Math.floor(11*Math.random());for(typeNumber==2&&moveLength>=1&&(num1=Math.floor(13*Math.random()),num2=Math.floor(13*Math.random()));typeNumber==3&&(num1<num2||num1%num2!=0||num2==0);)moveLength>=1?num1=Math.floor(51*Math.random()):num1=Math.floor(11*Math.random()),num2=Math.floor(11*Math.random());let problem=num1.toString()+" "+problemInfo[typeNumber].operator+" "+num2.toString();problems.push({problem,answer:eval(problem),color:problemInfo[typeNumber].color,x:problemInfo[typeNumber].x,y:0})}}function input_binding(e){binding_callbacks[e?"unshift":"push"](()=>{highscoreInput=e,$$invalidate(3,highscoreInput)})}const keypress_handler=e=>handleKeypress(e);function input_input_handler(){name=this.value,$$invalidate(5,name)}const keypress_handler_1=e=>handleKeypress(e);function input_input_handler_1(){answer=to_number(this.value),$$invalidate(4,answer)}function input_binding_1(e){binding_callbacks[e?"unshift":"push"](()=>{gameInput=e,$$invalidate(8,gameInput)})}return $$self.$$.update=()=>{$$self.$$.dirty[0]&12&&gameOver&&(highscoreInput==null||highscoreInput.focus()),$$self.$$.dirty[0]&2&&gameStarted&&startGame(),$$self.$$.dirty[0]&1&&(poeng%5==0&&poeng>0&&(speedIncrease=!0),poeng%10==0&&poeng>0&&(rateIncrease=!0))},[poeng,gameStarted,gameOver,highscoreInput,answer,name,problems,highscores,gameInput,handleKeypress,input_binding,keypress_handler,input_input_handler,keypress_handler_1,input_input_handler_1,input_binding_1]}class Page extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{},null,[-1,-1])}}export{Page as component};
