import{s as safe_not_equal,n as noop,r as run_all}from"../chunks/scheduler.e108d1fd.js";import{S as SvelteComponent,i as init,g as element,m as text,s as space,h as claim_element,j as children,n as claim_text,f as detach,c as claim_space,k as attr,l as set_style,a as insert_hydration,x as append_hydration,y as set_input_value,z as listen,o as set_data,A as to_number,B as destroy_each,C as get_svelte_dataset}from"../chunks/index.44417ef7.js";function ensure_array_like(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const _page_svelte_svelte_type_style_lang="";function get_each_context(t,e,l){const i=t.slice();return i[21]=e[l],i}function create_if_block_1(t){let e,l="Trykk ENTER for å starte",i,n,s="Skriv inn svar på regnestykkene og trykk ENTER. Er svaret riktig forsvinner regnestykket. Få så mange poeng som mulig før regnestykkene kommer til bunnen.";return{c(){e=element("h1"),e.textContent=l,i=space(),n=element("p"),n.textContent=s,this.h()},l(a){e=claim_element(a,"H1",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(e)!=="svelte-1hwwec"&&(e.textContent=l),i=claim_space(a),n=claim_element(a,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(n)!=="svelte-ine46i"&&(n.textContent=s),this.h()},h(){attr(e,"class","start-headline svelte-1jjtpld"),attr(n,"class","start-instructions svelte-1jjtpld")},m(a,h){insert_hydration(a,e,h),insert_hydration(a,i,h),insert_hydration(a,n,h)},d(a){a&&(detach(e),detach(i),detach(n))}}}function create_if_block(t){let e,l,i="Spillet er slutt",n,s,a,h,g;return{c(){e=element("div"),l=element("h1"),l.textContent=i,n=space(),s=element("p"),a=text("Du fikk "),h=text(t[0]),g=text(" poeng"),this.h()},l(f){e=claim_element(f,"DIV",{class:!0});var _=children(e);l=claim_element(_,"H1",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(l)!=="svelte-de7d2n"&&(l.textContent=i),n=claim_space(_),s=claim_element(_,"P",{class:!0});var y=children(s);a=claim_text(y,"Du fikk "),h=claim_text(y,t[0]),g=claim_text(y," poeng"),y.forEach(detach),_.forEach(detach),this.h()},h(){attr(l,"class","game-over-headline svelte-1jjtpld"),attr(s,"class","game-over-text svelte-1jjtpld"),attr(e,"class","game-over svelte-1jjtpld")},m(f,_){insert_hydration(f,e,_),append_hydration(e,l),append_hydration(e,n),append_hydration(e,s),append_hydration(s,a),append_hydration(s,h),append_hydration(s,g)},p(f,_){_&1&&set_data(h,f[0])},d(f){f&&detach(e)}}}function create_each_block(t){let e,l=t[21].problem+"",i;return{c(){e=element("p"),i=text(l),this.h()},l(n){e=claim_element(n,"P",{style:!0,class:!0});var s=children(e);i=claim_text(s,l),s.forEach(detach),this.h()},h(){set_style(e,"color",t[21].color),set_style(e,"left",t[21].x+"px"),set_style(e,"top",t[21].y+"px"),attr(e,"class","svelte-1jjtpld")},m(n,s){insert_hydration(n,e,s),append_hydration(e,i)},p(n,s){s&16&&l!==(l=n[21].problem+"")&&set_data(i,l),s&16&&set_style(e,"color",n[21].color),s&16&&set_style(e,"left",n[21].x+"px"),s&16&&set_style(e,"top",n[21].y+"px")},d(n){n&&detach(e)}}}function create_fragment(t){let e,l,i,n,s,a,h,g,f,_,y,u,I,k,m=!t[1]&&create_if_block_1(),p=t[3]&&create_if_block(t),b=ensure_array_like(t[4]),c=[];for(let r=0;r<b.length;r+=1)c[r]=create_each_block(get_each_context(t,b,r));return{c(){e=element("div"),l=element("h1"),i=text("Poeng: "),n=text(t[0]),s=space(),a=element("div"),m&&m.c(),h=space(),p&&p.c(),g=space();for(let r=0;r<c.length;r+=1)c[r].c();f=space(),_=element("hr"),y=space(),u=element("input"),this.h()},l(r){e=claim_element(r,"DIV",{class:!0,style:!0});var d=children(e);l=claim_element(d,"H1",{});var o=children(l);i=claim_text(o,"Poeng: "),n=claim_text(o,t[0]),o.forEach(detach),s=claim_space(d),a=claim_element(d,"DIV",{class:!0});var v=children(a);m&&m.l(v),h=claim_space(v),p&&p.l(v),g=claim_space(v);for(let $=0;$<c.length;$+=1)c[$].l(v);f=claim_space(v),_=claim_element(v,"HR",{class:!0}),v.forEach(detach),y=claim_space(d),u=claim_element(d,"INPUT",{class:!0,type:!0}),d.forEach(detach),this.h()},h(){attr(_,"class","svelte-1jjtpld"),attr(a,"class","game-window svelte-1jjtpld"),attr(u,"class","game-input svelte-1jjtpld"),attr(u,"type","number"),u.autofocus=!0,attr(e,"class","content svelte-1jjtpld"),set_style(e,"--width",WIDTH+"px"),set_style(e,"--height",HEIGHT+"px")},m(r,d){insert_hydration(r,e,d),append_hydration(e,l),append_hydration(l,i),append_hydration(l,n),append_hydration(e,s),append_hydration(e,a),m&&m.m(a,null),append_hydration(a,h),p&&p.m(a,null),append_hydration(a,g);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(a,null);append_hydration(a,f),append_hydration(a,_),append_hydration(e,y),append_hydration(e,u),set_input_value(u,t[2]),u.focus(),I||(k=[listen(u,"keypress",t[6]),listen(u,"input",t[7])],I=!0)},p(r,[d]){if(d&1&&set_data(n,r[0]),r[1]?m&&(m.d(1),m=null):m||(m=create_if_block_1(),m.c(),m.m(a,h)),r[3]?p?p.p(r,d):(p=create_if_block(r),p.c(),p.m(a,g)):p&&(p.d(1),p=null),d&16){b=ensure_array_like(r[4]);let o;for(o=0;o<b.length;o+=1){const v=get_each_context(r,b,o);c[o]?c[o].p(v,d):(c[o]=create_each_block(v),c[o].c(),c[o].m(a,f))}for(;o<c.length;o+=1)c[o].d(1);c.length=b.length}d&4&&to_number(u.value)!==r[2]&&set_input_value(u,r[2])},i:noop,o:noop,d(r){r&&detach(e),m&&m.d(),p&&p.d(),destroy_each(c,r),I=!1,run_all(k)}}}const WIDTH=1200,HEIGHT=500,ADDITION_LANE=100,SUBTRACTION_LANE=400,MULTIPLICATION_LANE=700,DIVISION_LANE=1e3;let animationSpeed=10;function instance($$self,$$props,$$invalidate){let timer=0,moveLength=.5,rate=300,interval,answer,poeng=0,gameStarted=!1,gameOver=!1,speedIncrease=!1,rateIncrease=!1,problemInfo={0:{operator:"+",color:"#FF6969",x:ADDITION_LANE},1:{operator:"-",color:"#53BF9D",x:SUBTRACTION_LANE},2:{operator:"*",color:"#F7D060",x:MULTIPLICATION_LANE},3:{operator:"/",color:"#5272F2",x:DIVISION_LANE}},problems=[];function startGame(){$$invalidate(4,problems=[]),moveLength=.5,$$invalidate(0,poeng=0),rate=300,interval=setInterval(()=>{checkGameOver(),checkSpeedIncreaseAndRate(),generateProblem(),moveProblems(),timer++},animationSpeed)}function moveProblems(){for(const t of problems)t.y+=moveLength;$$invalidate(4,problems)}function checkGameOver(){for(const t of problems)t.y>HEIGHT-50+3&&(clearInterval(interval),setTimeout(()=>{$$invalidate(3,gameOver=!0),$$invalidate(4,problems=[])},2e3),setTimeout(()=>{$$invalidate(3,gameOver=!1),$$invalidate(1,gameStarted=!1)},1e4))}function handleKeypress(t){t.keyCode==13&&!gameStarted?$$invalidate(1,gameStarted=!0):t.keyCode==13&&(checkAnswer(answer),$$invalidate(2,answer=""))}function checkAnswer(t){problems.forEach(e=>{e.answer==t&&$$invalidate(0,poeng++,poeng)}),$$invalidate(4,problems=problems.filter(e=>e.answer!=t))}function checkSpeedIncreaseAndRate(t){speedIncrease&&(moveLength+=.1,speedIncrease=!1),rateIncrease&&(rate-=30,rateIncrease=!1)}function generateProblem(){if(timer%rate==0){let typeNumber=Math.floor(4*Math.random()),num1=Math.floor(10*Math.random()),num2=Math.floor(10*Math.random());for(;typeNumber==1&&num1<num2;)num1=Math.floor(10*Math.random()),num2=Math.floor(10*Math.random());for(;typeNumber==3&&(num1<num2||num1%num2!=0||num2==0);)num1=Math.floor(10*Math.random()),num2=Math.floor(10*Math.random());let problem=num1.toString()+" "+problemInfo[typeNumber].operator+" "+num2.toString();problems.push({problem,answer:eval(problem),color:problemInfo[typeNumber].color,x:problemInfo[typeNumber].x,y:0})}}const keypress_handler=t=>handleKeypress(t);function input_input_handler(){answer=to_number(this.value),$$invalidate(2,answer)}return $$self.$$.update=()=>{$$self.$$.dirty&2&&gameStarted&&startGame(),$$self.$$.dirty&1&&(poeng%5==0&&poeng>0&&(speedIncrease=!0),poeng%10==0&&poeng>0&&(rateIncrease=!0))},[poeng,gameStarted,answer,gameOver,problems,handleKeypress,keypress_handler,input_input_handler]}class Page extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}export{Page as component};
